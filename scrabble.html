<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrabble Românico</title>
    <link rel="stylesheet" href="styles.css">
    <script>

const wiktionaryDomains = {
    pt: "pt.wiktionary.org",
    it: "it.wiktionary.org",
    fr: "fr.wiktionary.org",
    es: "es.wiktionary.org",
    ro: "ro.wiktionary.org"
};
const languageVariants = {
    "pt": ["Portugais", "Português", "Portuguese", "Portoghese", "Portugheză"],
    "it": ["Italien", "Italiano", "Italian", "Italienisch", "Italiană"],
    "fr": ["Français", "Francês", "French", "Francese", "Franceză"],
    "es": ["Espagnol", "Espanhol", "Spanish", "Spagnolo", "Spaniolă"],
    "ro": ["Roumain", "Romeno", "Romanian", "Rumeno", "Română"]
};

function matchLanguage(langName) {
    for (const [langCode, variants] of Object.entries(languageVariants)) {
        if (variants.some(variant => variant.toLowerCase() === langName.toLowerCase())) {
            return langCode;
        }
    }
    return null;
}
async function checkWordLanguages(word) {
    const normalizedWord = word.normalize("NFC"); // Normalizar para NFC
    const encodedWord = encodeURIComponent(normalizedWord); // Codificar para URL
    const results = [];

    for (const [lang, domain] of Object.entries(wiktionaryDomains)) {
        const url = `https://${domain}/w/api.php?action=query&titles=${encodedWord}&prop=extracts&explaintext=true&format=json&origin=*`;

        try {
            const response = await fetch(url);
            if (response.ok) {
                const data = await response.json();
                const pages = data.query.pages;
                const page = Object.values(pages)[0];

                if (page && !page.missing) {
                    const extract = page.extract || "Sem definição disponível.";
                    results.push({ lang, extract });
                }
            }
        } catch (error) {
            console.error(`Erro ao consultar o Wiktionary (${lang}):`, error);
        }
    }

    // Exibir resultados
    if (results.length > 0) {
        const resultsHtml = results
            .map(result => `
                <div>
                    <h4>${languageVariants[result.lang][1]}:</h4>
                    <p>${result.extract}</p>
                </div>
            `)
            .join("");
        document.getElementById("validationResult").innerHTML = resultsHtml;
    } else {
        document.getElementById("validationResult").innerHTML =
            `A palavra "${word}" não foi encontrada em nenhuma língua românica.`;
    }
}


// Função para calcular pontuação da palavra
const scores = {
    A: 1, B: 3, C: 3, Ç: 5, D: 2, E: 1, F: 4, G: 2,
    H: 4, I: 1, J: 8, K: 10, L: 1, M: 3, N: 1,
    O: 1, P: 3, Q: 10, R: 1, S: 1, T: 1, U: 1,
    V: 4, W: 10, X: 8, Y: 10, Z: 10
};

function calculateScore(word) {
    const normalizedWord = word.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    let score = 0;

    for (const letter of normalizedWord) {
        score += scores[letter] || 0;
    }

    return score;
}

function displayScore(word) {
    if (!word.trim()) {
        document.getElementById("scoreResult").textContent = "Por favor, insira uma palavra.";
        return;
    }

    const score = calculateScore(word);
    document.getElementById("scoreResult").textContent =
        `A pontuação da palavra "${word}" é: ${score}.`;
}

    </script>
</head>
<body>
    <h1>Scrabble Românico</h1>

 <form onsubmit="return false;">
        <input type="text" id="word" placeholder="Digite uma palavra">
        <button type="button" onclick="checkWordLanguages(document.getElementById('word').value)">
            Identificar Línguas Românicas
        </button>
        <button type="button" onclick="displayScore(document.getElementById('word').value)">
            Calcular Pontuação
        </button>
    </form>

    <div>
        <h3>Resultado da Validação:</h3>
        <div id="validationResult"></div>
    </div>

    <div>
        <h3>Pontuação da Palavra:</h3>
        <div id="scoreResult"></div>
    </div>

    </div>
</body>
</html>
